spring.application.name=School Management System

# Database Configuration for MySQL (Production)
spring.datasource.url=jdbc:mysql://mysql:3306/school_management_system?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=${MYSQL_USER:school_user}
spring.datasource.password=${MYSQL_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false

# Server Configuration
server.port=8080
server.servlet.context-path=/
server.tomcat.connection-timeout=300000
server.tomcat.keep-alive-timeout=300000
server.tomcat.max-keep-alive-requests=100

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=15MB
file.upload.directory=/app/uploads

# JWT Configuration - Production (Use environment variables)
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Logging Configuration - Production
logging.level.com.devtech.school_management_system=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.file.name=/app/logs/application.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Jackson Configuration
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.serialization.write-dates-as-timestamps=false

# Validation Configuration
spring.jpa.properties.hibernate.validator.apply_to_ddl=false

# Connection Pool Configuration - Production
spring.datasource.hikari.maximum-pool-size=${CONNECTION_POOL_MAX_SIZE:20}
spring.datasource.hikari.minimum-idle=${CONNECTION_POOL_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${CONNECTION_TIMEOUT:20000}
spring.datasource.hikari.idle-timeout=${IDLE_TIMEOUT:300000}
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.leak-detection-threshold=60000

# Hibernate Configuration
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Error Handling - Production
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false

# CORS Configuration - Production
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://yourdomain.com}

# Actuator Configuration - Production
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never
management.endpoint.health.show-components=never
management.info.env.enabled=true
management.metrics.export.prometheus.enabled=true

# Security Configuration
server.ssl.enabled=${SECURITY_REQUIRE_SSL:false}
server.forward-headers-strategy=native

# AI Provider Configuration - Production (Use environment variables)
# OpenAI Configuration
ai.openai.api-key=${AI_OPENAI_API_KEY}
ai.openai.model=${AI_OPENAI_MODEL:gpt-4o-mini}
ai.openai.max-tokens=${AI_OPENAI_MAX_TOKENS:4000}
ai.openai.temperature=${AI_OPENAI_TEMPERATURE:0.7}
ai.openai.timeout=${AI_OPENAI_TIMEOUT:30000}

# Anthropic Claude Configuration
ai.anthropic.api-key=${AI_ANTHROPIC_API_KEY}
ai.anthropic.model=${AI_ANTHROPIC_MODEL:claude-3-sonnet-20240229}
ai.anthropic.max-tokens=${AI_ANTHROPIC_MAX_TOKENS:4000}
ai.anthropic.temperature=${AI_ANTHROPIC_TEMPERATURE:0.7}
ai.anthropic.timeout=${AI_ANTHROPIC_TIMEOUT:30000}

# Google Gemini Configuration
ai.google.api-key=${AI_GOOGLE_API_KEY}
ai.google.model=${AI_GOOGLE_MODEL:gemini-pro}
ai.google.max-tokens=${AI_GOOGLE_MAX_TOKENS:4000}
ai.google.temperature=${AI_GOOGLE_TEMPERATURE:0.7}
ai.google.timeout=${AI_GOOGLE_TIMEOUT:30000}

# Azure OpenAI Configuration
ai.azure.openai.endpoint=${AI_AZURE_OPENAI_ENDPOINT}
ai.azure.openai.api-key=${AI_AZURE_OPENAI_API_KEY}
ai.azure.openai.model=${AI_AZURE_OPENAI_MODEL:gpt-4}
ai.azure.openai.max-tokens=${AI_AZURE_OPENAI_MAX_TOKENS:4000}
ai.azure.openai.temperature=${AI_AZURE_OPENAI_TEMPERATURE:0.7}
ai.azure.openai.timeout=${AI_AZURE_OPENAI_TIMEOUT:30000}

# Hugging Face Configuration
ai.huggingface.api-key=${AI_HUGGINGFACE_API_KEY}
ai.huggingface.model=${AI_HUGGINGFACE_MODEL:microsoft/DialoGPT-medium}
ai.huggingface.max-tokens=${AI_HUGGINGFACE_MAX_TOKENS:4000}
ai.huggingface.temperature=${AI_HUGGINGFACE_TEMPERATURE:0.7}
ai.huggingface.timeout=${AI_HUGGINGFACE_TIMEOUT:30000}

# Local AI Configuration (Ollama, etc.)
ai.local.endpoint=${AI_LOCAL_ENDPOINT}
ai.local.model=${AI_LOCAL_MODEL:llama2}
ai.local.max-tokens=${AI_LOCAL_MAX_TOKENS:4000}
ai.local.temperature=${AI_LOCAL_TEMPERATURE:0.7}
ai.local.timeout=${AI_LOCAL_TIMEOUT:30000}

# Default AI Provider
ai.default.provider=${AI_DEFAULT_PROVIDER:openai}
ai.default.model=${AI_DEFAULT_MODEL:gpt-4o-mini}

# Twilio WhatsApp Configuration - Production
twilio.account.sid=${TWILIO_ACCOUNT_SID}
twilio.auth.token=${TWILIO_AUTH_TOKEN}
twilio.whatsapp.from=${TWILIO_WHATSAPP_FROM:whatsapp:+14155238886}
twilio.whatsapp.webhook.url=${TWILIO_WHATSAPP_WEBHOOK_URL}
twilio.whatsapp.enabled=${TWILIO_WHATSAPP_ENABLED:true}
twilio.whatsapp.retry.attempts=${TWILIO_WHATSAPP_RETRY_ATTEMPTS:3}
twilio.whatsapp.retry.delay=${TWILIO_WHATSAPP_RETRY_DELAY:5000}

# Email Configuration - Production
spring.mail.host=${SMTP_HOST}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME}
spring.mail.password=${SMTP_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=${SMTP_HOST}
mail.from=${SMTP_FROM}

# Performance Monitoring
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.percentiles.http.server.requests=0.5,0.95,0.99